---
import CoverCardGrid from "../components/CoverCardGrid.astro";
import PageHeader from "../components/PageHeader.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import { supabase } from "../lib/supabase";

const { data: covers } = await supabase
  .from("covers")
  .select(
    `
    slug,
    original:original_id(id, name, artists, album_name, album_img),
    cover:cover_id(id, name, artists, album_name, album_img)
  `
  )
  .order("created_at", { ascending: false });
---

<BaseLayout
  title="Genderswap.fm"
  description="Some covers deliver the age-old simple pleasures of drag."
>
  <PageHeader
    title="Genderswap.fm"
    description="Some covers deliver the age-old simple pleasures of drag."
  />
  <CoverCardGrid covers={covers as any} />
</BaseLayout>
